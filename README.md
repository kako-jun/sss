# sss - Smart Slide Show

10万枚以上の写真を公平に表示するスライドショーアプリケーション

## 特徴

- **完全平等ランダム表示**: 全画像を1巡するまで重複なし
- **高速差分スキャン**: 起動時に変更された画像だけを検出
- **4K対応**: 高解像度ディスプレイに最適化、自動リサイズ＆キャッシュ
- **Tauriプロトコル画像ロード**: クロスプラットフォーム対応の効率的な画像読み込み
- **5枚先読みキャッシュ**: スムーズな画像切り替え（弱いCPU対応、直列処理）
- **表示統計**: 表示回数と最新表示時刻を記録・表示
- **EXIF情報表示**: 撮影日時、GPS座標を表示
- **.sssignore**: gitignore形式で除外ルールを設定（ホームディレクトリに配置）
- **スクリーンセーバー抑制**: 常にディスプレイをオンに保つ
- **クロスプラットフォーム**: Windows/Linux/macOS対応

## インストール

### 必要なもの

- Node.js (v18以上)
- Rust (rustup経由)

### セットアップ

```bash
# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run tauri:dev

# ビルド
npm run tauri:build
```

## 使い方

### 初回起動

1. アプリを起動すると設定画面が表示されます
2. 「フォルダ選択」ボタンで写真フォルダを選択
3. 「フォルダをスキャン」ボタンでスキャン開始
4. スキャン完了後、自動的にスライドショーが開始されます

### 基本操作

#### マウス操作
- **マウス移動**: UIを表示 & 自動一時停止
- **オーバーレイ外クリック**: UIを即座に非表示 & 再開
- **前へボタン**: 前の画像に戻る（履歴から、表示回数は増やさない）
- **次へボタン**: 次の画像へ進む（即座に切り替え）
- **開くボタン**: ファイルマネージャーで画像を選択状態で開く
- **設定ボタン**: 設定画面を開く

#### キーボードショートカット
- **ESC**: アプリを終了
- **左矢印キー**: 前の画像へ戻る
- **右矢印キー**: 次の画像へ進む

### .sssignore

ユーザーホームディレクトリ（Windows: `%USERPROFILE%`、Unix: `$HOME`）に `.sssignore` ファイルを作成することで、特定の画像を除外できます。

```gitignore
# 特定の日付を除外
**/2023-05-15/**
**/2024-01-*/**

# 特定のフォルダを除外
**/private/**
**/work/**

# ファイルパターン
*_draft.*
screenshot_*.png
```

## 技術スタック

### バックエンド (Rust)
- **Tauri v2**: デスクトップアプリフレームワーク（最新版、モバイル対応準備）
- **rusqlite v0.32**: SQLiteデータベース
- **rayon v1**: 並列処理
- **image v0.25**: 画像処理（4Kリサイズ）
- **kamadak-exif v0.6**: EXIF情報読み取り
- **md5 v0.7**: キャッシュファイル名ハッシュ生成
- **globset v0.4**: .sssignore解析
- **keepawake v0.4**: スクリーンセーバー抑制

### フロントエンド (React)
- **React 19**: UIライブラリ
- **TypeScript**: 型安全性
- **Vite v7**: 高速ビルドツール
- **Framer Motion**: アニメーション
- **TailwindCSS v3**: スタイリング
- **Lucide React**: アイコン

## オーバーレイUI情報

マウス移動時に表示される情報：
- 📁 ファイルパス（フルパス）
- 🖼️ 画像サイズ（幅x高さ）
- 💾 ファイルサイズ
- 📅 撮影日時（EXIFから、画像のみ）
- 📍 GPS座標（EXIF: 緯度・経度、画像のみ）
- 📊 プレイリスト位置（例: 1,234 / 100,000）
- 🔢 表示回数
- 🕒 最新表示時刻（ISO 8601形式）

## パフォーマンス

- 初回スキャン（10万枚）: < 30秒
- 差分スキャン（変更100枚）: < 3秒
- 起動からスライドショー開始: < 5秒（差分スキャン時）
- 画像切り替え: < 100ms
- メモリ使用量: < 500MB

## サイネージ用途での運用

常時稼働させる場合は、OS側で自動起動・終了を管理することを推奨します：

### Windows: タスクスケジューラー
- 毎日8:00に起動、22:00に終了を設定
- PCの再起動後も自動で動作

### Linux: cron / systemd timer
- cronで起動・終了を設定

### macOS: launchd
- plistファイルで起動・終了を設定

詳細は `CLAUDE.md` を参照してください。

## ライセンス

MIT

## 作者

kako-jun